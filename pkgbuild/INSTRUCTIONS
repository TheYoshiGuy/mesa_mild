-Instructions :
-
-This is for archlinux, many distribution based on arch should work.
-Any distribution recent enough should work when building from source 
-Because of dependencies related to wine, be sure to enable multilib and have a gcc able to build both amd64 or i686 binaries
-Mesa depends on a recent libdrm and a recent kernel
-This repository will be updated from time to time when I'm sure the update doesn't break some programs (but not all)


I) If you don't know how to proceed to build a package from git

- Download the script called build_mesa.sh from this directory (as raw), don't clone repository first unless you don't care about the space or the data, (you'll be cloning more than enough)
- check if it suits you (as an habit you should never execute something you just downloaded just because you're told to)

-1) Add this repository in /etc/pacman.conf BEFORE the others repositories so you can grab lattest LLVM, kernel and libdrm
-
-[mesa-git]
-Server = http://pkgbuild.com/~lcarlier/$repo/$arch
-SigLevel = Never
-

-2) Run the script 

-3) Wait

-4) Wait more

-5) Try to learn "to wait" in many languages, in french "attendre" open a door to many synonyms.

-6) Once it's finished, the packages will be available in PKGBUILD/<component>/

-7) Note this on a paper :" if systems is unable to boot add =>  modprobe.blacklist=amdgpu,radeonsi <= to the kernel command line and then reinstall official mesa"

-8) You may install the pkg if it complains with the commandline 

    pacman -Udd PKGBUILD/libdrm64/*xz --force
    pacman -Udd PKGBUILD/libdrm32/*xz --force
    pacman -Udd PKGBUILD/mesa64/*xz --force
    pacman -Udd PKGBUILD/mesa32/*xz --force



II) 

If everything goes well you have now a mesa with four new options of configuration available.
-
-Select these options (for your graphic card) using "driconf" 
-
-"performance"
-    disable "Enable offloading GL driver work to a separate thread"
-"debug"
-    enable "Force GLSL extension default behaviour to warn"
-    enable "Always allow glGetString(GL_EXTENSIONS)"
-    enable "Allow more type of primitives in glDrawArray"
-    enable "Special handling of mesa_uniform when location = -1"
-    enable "Bypass some validation related to VBO when using core profile"
-    
-
-Save or close application and it's best if you reboot now, but it may not be necessary
-
-To launch CEMU (if installed for instance in /cemu/cemu1.8.0)
-Open a terminal
-# cd /cemu/cemu1.8.0
-# "MESA_GL_VERSION_OVERRIDE=4.5" wine64 Cemu.exe
-
-- Check MESA_NO_ERROR is  not set (unless you stick to a stable 17.1)
-
-6) You need to prevent pacman to erase mesa and its dependencies or you'll endup building it again 
-
-in /etc/pacman.conf add where it fits :
-IgnoreGroup = mesagit
