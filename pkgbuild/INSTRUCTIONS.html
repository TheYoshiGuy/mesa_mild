<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 5.3.3.2 (Linux)"/>
	<meta name="created" content="2017-06-16T19:55:10.458331455"/>
	<meta name="changed" content="2017-06-16T21:14:08.989928811"/>
	<style type="text/css">
		@page { margin: 2cm }
		p { margin-bottom: 0.25cm; line-height: 120% }
		h1 { margin-bottom: 0.21cm }
		h1.western { font-family: "Liberation Sans", sans-serif; font-size: 18pt }
		h1.cjk { font-family: "AR PL UMing CN"; font-size: 18pt }
		h1.ctl { font-family: "FreeSans"; font-size: 18pt }
		h2.western { font-family: "Liberation Sans", sans-serif; font-size: 16pt }
		h2.cjk { font-family: "AR PL UMing CN"; font-size: 16pt }
		h2.ctl { font-family: "FreeSans"; font-size: 16pt }
		h3.western { font-family: "Liberation Sans", sans-serif; font-size: 14pt }
		h3.cjk { font-family: "AR PL UMing CN"; font-size: 14pt }
		h3.ctl { font-family: "FreeSans"; font-size: 14pt }
		td p { margin-bottom: 0cm }
		a:link { so-language: zxx }
	</style>
</head>
<body lang="fr-FR" dir="ltr">
<p align="center" style="margin-top: 0.42cm; margin-bottom: 0.21cm; line-height: 100%; page-break-after: avoid">
<font face="Liberation Sans, sans-serif"><font size="6" style="font-size: 28pt"><b>INSTRUCTIONS</b></font></font></p>
<h1 class="western">Compatibility</h1>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<table width="1047" cellpadding="4" cellspacing="0">
	<col width="256">
	<col width="226">
	<col width="173">
	<col width="358">
	<tr valign="top">
		<td width="256" bgcolor="#007fff" style="background: #007fff" style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0.1cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#000040"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b><span style="background: transparent">CPU
			Type</span></b></font></font></font></p>
		</td>
		<td width="226" bgcolor="#007fff" style="background: #007fff" style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0.1cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#000040"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b><span style="background: transparent">GPU</span></b></font></font></font></p>
		</td>
		<td width="173" bgcolor="#007fff" style="background: #007fff" style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0.1cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#000040"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b><span style="background: transparent">CEMU
			Status</span></b></font></font></font></p>
		</td>
		<td width="358" bgcolor="#007fff" style="background: #007fff" style="border: 1px solid #000000; padding: 0.1cm">
			<p align="center"><font color="#000040"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b><span style="background: transparent">Comments</span></b></font></font></font></p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Haswell</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">R9-270X</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#008000"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Works</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><br/>

			</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Haswell</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">IGD</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#008000"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Works</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Need
			to override GL_VENDOR</font></font></p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">SandyBridge</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">RX
			470</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#a80053"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Crash</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><br/>

			</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Skylake</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">RX
			470</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#a80053"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Crash</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><br/>

			</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Skylake</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">IGD</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#008000"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Works</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">Need
			to override GL_VENDOR</font></font></p>
		</td>
	</tr>
	<tr valign="top">
		<td width="256" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">IvyBridge</font></font></p>
		</td>
		<td width="226" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt">R9-380X</font></font></p>
		</td>
		<td width="173" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm">
			<p align="center"><font color="#008000"><font face="Liberation Sans, sans-serif"><font size="5" style="font-size: 18pt"><b>Works</b></font></font></font></p>
		</td>
		<td width="358" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm">
			<p><br/>

			</p>
		</td>
	</tr>
</table>
<h1 class="western"></h1>
<p><br/>
<br/>

</p>
<h1 class="western">Why this&nbsp;?</h1>
<p>Many people are trying to run Cemu ( <a href="http://cemu.info/">http://cemu.info</a>
) on various GNU/Linux distribution over WINE (
<a href="https://www.winehq.org/">https://www.winehq.org/</a> ), and
as they have either AMD’s GPU or Intel IGD, they encounter a crash
before as they start application or soon after.</p>
<p>Essentialy there are two ways of using OpenGL nowadays, one is
there for ensuring a smooth transition from legacy practices, a
smooth transition from a long time ago.</p>
<p>Hardware vendors doesn’t all the time respect standards, so some
of them still support this way of doing things.</p>
<p>Mesa developpers are working hard to provide an excellent support,
and they’re successful doing it, however some applications that are
disrespectful with standards, can give you an hard time, when you try
to make them work.</p>
<p>The problem is that Cemu is using an old and rather legacy way of
intialising and using OPENGL.&nbsp;:</p>
<ul>
	<li/>
<p>It tries to get a list of available OpenGL’s extension in
	a wrong way.</p>
	<li/>
<p>It tries to draw quads but this should not be supported
	anymore.</p>
	<li/>
<p>Sometimes it tries to get  informations from shaders, also
	in a legacy way</p>
	<li/>
<p>Sometimes it change codepathes to work aroung drivers
	issues. Because drivers are known to be broken somehow.</p>
</ul>
<p>This version of mesa, was made to overcome most of these issue,
and as such allow to use Cemu with mesa drivers.</p>
<h1 class="western">Requirements&nbsp;</h1>
<p><br/>
<br/>

</p>
<p>Mesa has a strong requirement about LLVM (5.0) and LIBDRM ( 2.4.81
), plus it’s always a good idea,   to have a recent kernel.</p>
<h1 class="western">How to install</h1>
<h3 class="western">Applies to  everyone</h3>
<p><br/>
<br/>

</p>
<p>This is a normal git repository, so basically any way you use to
build mesa from sources, will work.</p>
<h3 class="western">For archlinux based distribution</h3>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<p style="margin-bottom: 0cm; line-height: 100%">As not everyone know
how to build mesa from sources, or using pkgbuild, there is some
script available here&nbsp;:</p>
<p style="margin-bottom: 0cm; line-height: 100%">
<a href="https://raw.githubusercontent.com/mikakev1/mesa_mild_compatibility/master/pkgbuild/buildmesa.sh">https://raw.githubusercontent.com/mikakev1/mesa_mild_compatibility/master/pkgbuild/buildmesa.sh</a>
</p>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<p style="margin-bottom: 0cm; line-height: 100%">Inspect the content,
tune to your need,  and run it if it helps.</p>
<p style="margin-bottom: 0cm; line-height: 100%">Basically this
script will ensure you have everything you need, perform update,
download dependencies, some of them will be built, and it will build
mesa.</p>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<p style="margin-bottom: 0cm; line-height: 100%">After it’ll
provide you with the command line you’ll need to type to install
it.</p>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<h2 class="western">Result</h2>
<p><br/>
<br/>

</p>
<p>You’ll be provided with new tunable, for dri (check /etc/drirc),
available in a GUI (driconf), and a couple of environement variable
that you may want to use incase you own an intel GPU, and want to use
it.</p>
<p>Namely they’re&nbsp;:</p>
<p>DRICONF</p>
<ol>
	<li/>
<p><a name="__DdeLink__1_477865187"></a>Always allow
	glGetString(GL_EXTENSIONS)</p>
	<li/>
<p>Allow more types of primitives in glDrawArrays</p>
	<li/>
<p>Special handling of mesa_uniform when location is &nbsp;-1</p>
	<li/>
<p>Bypass some validation related to VBO when using core
	profile</p>
</ol>
<p><br/>
<br/>

</p>
<p>Environment variable&nbsp;:</p>
<ol>
	<li/>
<p><a name="__DdeLink__3_477865187"></a><font face="monospace"><font color="#000000"><span style="background: #ffffff">HMESA_VENDOR_OVERRIDE
	– To allow to force a vendor’s name</span></font></font></p>
	<li/>
<p><a name="__DdeLink__5_477865187"></a><font face="monospace"><font color="#000000"><span style="background: #ffffff">HMESA_RENDERER_OVERRIDE
	– To force the hardware/driver’s name</span></font></font></p>
	<p></p>
</ol>
<h2 class="western"><font color="#000000"><span style="background: #ffffff">How
to use</span></font></h2>
<h2 class="western"><font color="#000000"><span style="background: #ffffff">Applies
to ALL&nbsp;:</span></font></h2>
<p><br/>
<br/>

</p>
<p><font color="#000000"><span style="background: #ffffff">Set in
driconf&nbsp;:</span></font></p>
<ul>
	<li/>
<p><font color="#3f8000"><b>Always allow
	glGetString(GL_EXTENSIONS)</b></font></p>
	<li/>
<p><font color="#3f8000"><b>Allow more types of primitives in
	glDrawArrays</b></font></p>
	<li/>
<p><font color="#3f8000"><b>Special handling of mesa_uniform
	when location is &nbsp;-1</b></font></p>
	<li/>
<p><font color="#3f8000"><b><span style="background: #ffffff">Bypass
	some validation related to VBO when using core profile</span></b></font></p>
	<li/>
<p><font color="#3f8000"><b><span style="background: #ffffff">Force
	GLSLextension behavior to ‘warn’</span></b></font></p>
</ul>
<p><br/>
<br/>

</p>
<p>Check that this is disabled in driconf&nbsp;:</p>
<ul>
	<li/>
<p><font color="#a80000"><b><span style="background: #ffffff">Allow
	a higher compat profile (version 3.1+) for apps that request it</span></b></font></p>
	<li/>
<p><font color="#a80000"><b><span style="background: #ffffff">Enable
	offloading GL driver work to a separate thread</span></b></font></p>
</ul>
<p><br/>
<br/>

</p>
<p>Check that MESA_NO_ERROR is not set in the environment</p>
<p>Set in the environment&nbsp;:</p>
<ul>
	<li/>
<p><font face="Droid Sans Mono, sans-serif">MESA_GL_VERSION_OVERRIDE=4.5</font></p>
</ul>
<p><br/>
<br/>

</p>
<h2 class="western">Special handling of intel’s IGD&nbsp;:</h2>
<p><br/>
<br/>

</p>
<p>Cemu has a workaround for intel IGD, that is activated if it
detects an intel IGD, and  you don’t want it.</p>
<p>Set in environment</p>
<ul>
	<li/>
<p><font face="Droid Sans Mono, sans-serif"><font color="#000000"><span style="background: #ffffff">HMESA_VENDOR_OVERRIDE</span></font><font color="#000000"><span style="background: #ffffff">=MESA</span></font></font></p>
	<li/>
<p><font face="Droid Sans Mono, sans-serif"><font color="#000000"><span style="background: #ffffff">HMESA_RENDERER_OVERRIDE</span></font><font color="#000000"><span style="background: #ffffff">=MESA</span></font></font></p>
</ul>
<h2 class="western">Finally</h2>
<p><br/>
<br/>

</p>
<p>You can run CEMU as you would normaly.</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
</body>
</html>